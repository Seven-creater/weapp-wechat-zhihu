# 無界营造 - 社区无障碍智慧服务平台

> 长沙理工大学建筑学院社区志愿服务项目
> 
> 通过整合高校专业力量与社会资源，为城市社区残障肢残人士、老年人等群体提供精准的无障碍改造服务

## 📱 项目简介

"無界营造"是一个基于微信小程序的社区无障碍智慧服务平台，实现了从问题发现、AI诊断、方案生成、造价估算到施工对接的全流程智能化服务。

### 核心功能

1. **🗺️ 社区无障碍地图及实景导航**
   - 实时标注无障碍设施位置与状态
   - 智能路径规划
   - 语音导航指引

2. **🤖 AI智能诊断**
   - 拍照识别障碍点
   - 自动生成诊断报告
   - 智能匹配改造方案

3. **💰 造价估算系统**
   - 自动计算材料费用
   - 人工成本估算
   - 生成详细预算表

4. **🏗️ 施工服务对接**
   - 智能匹配施工团队
   - 实时进度跟踪
   - 在线评价系统

5. **📱 案例分享社区**
   - 优质改造案例展示
   - 经验交流论坛
   - 点赞收藏评论

## 🏗️ 技术架构

### 前端技术
- 微信小程序原生开发
- 腾讯地图 API
- 瀑布流布局
- 实时数据更新

### 后端技术
- 微信云开发
- 云函数
- 云数据库
- 云存储

### AI技术
- 图像识别
- 智能诊断
- 方案匹配算法

## 📂 项目结构

```
weapp-wechat-zhihu/
├── pages/                      # 页面文件
│   ├── index/                  # 首页（地图导航）
│   ├── issue-edit/             # 随手拍/问题上报
│   ├── community/              # 社区动态
│   ├── post-detail/            # 动态详情
│   ├── solution-detail/        # 解决方案详情
│   ├── construction-progress/  # 施工进度跟踪（新增）
│   ├── mine/                   # 个人中心
│   └── ...
├── utils/                      # 工具模块
│   ├── common.js               # 通用工具函数
│   ├── permission.js           # 权限管理
│   ├── storage.js              # 数据存储
│   ├── database.js             # 数据库操作
│   ├── map.js                  # 地图服务
│   ├── ai.js                   # AI服务
│   ├── cost-estimate.js        # 造价估算（新增）
│   └── construction-team.js    # 施工团队管理（新增）
├── config/                     # 配置文件
│   └── index.js                # 全局配置
├── cloudfunctions/             # 云函数
│   ├── analyzeIssue/           # AI诊断
│   ├── getPublicData/          # 获取公开数据
│   ├── checkContent/           # 内容安全检测
│   └── ...
├── app.js                      # 小程序入口
├── app.json                    # 全局配置
└── app.wxss                    # 全局样式
```

## 🚀 快速开始

### 环境要求
- 微信开发者工具
- Node.js >= 14.0.0
- 微信云开发账号

### 安装步骤

1. **克隆项目**
```bash
git clone [项目地址]
cd weapp-wechat-zhihu
```

2. **配置云开发**
   - 在微信开发者工具中打开项目
   - 开通云开发服务
   - 配置云环境ID（在 `config/index.js` 中）

3. **部署云函数**
   - 右键点击 `cloudfunctions` 目录
   - 选择"上传并部署：云端安装依赖"

4. **初始化数据库**
   - 创建以下集合：
     - `issues` - 问题记录
     - `solutions` - 解决方案
     - `posts` - 社区动态
     - `comments` - 评论
     - `actions` - 用户行为
     - `follows` - 关注关系
     - `construction_projects` - 施工项目（新增）
     - `construction_teams` - 施工团队（新增）
     - `team_reviews` - 团队评价（新增）

5. **配置地图服务**
   - 在腾讯位置服务申请密钥
   - 在 `pages/index/index.js` 中配置 `TENCENT_MAP_KEY`

6. **编译运行**
   - 点击"编译"按钮
   - 在模拟器或真机上预览

## 📋 最新更新（2026-01-29）

### ✅ 已完成优化

1. **云开发初始化问题修复**
   - 所有18个页面文件已添加延迟初始化
   - 核心功能页面完全修复
   - 解决了 "请先调用 wx.cloud.init()" 错误

2. **造价估算模块开发**
   - 创建 `utils/cost-estimate.js` 工具模块
   - 支持5种无障碍设施类型的造价估算
   - 自动计算材料费、人工费、管理费等
   - 生成详细的预算明细表

3. **施工团队管理模块**
   - 创建 `utils/construction-team.js` 工具模块
   - 智能匹配算法（基于距离、评分、经验等）
   - 施工项目管理
   - 进度跟踪系统
   - 评价系统

4. **施工进度跟踪页面**
   - 创建 `pages/construction-progress/` 页面
   - 实时进度更新
   - 里程碑记录
   - 照片上传
   - 在线评价

### 🔄 进行中的优化

1. **AI诊断报告优化**
   - 增强诊断结果可视化
   - 优化报告格式

2. **实景导航功能增强**
   - 优化路径规划算法
   - 增加语音导航

3. **用户界面优化**
   - 统一视觉风格
   - 提升交互体验

## 📊 功能完成度

| 模块 | 完成度 | 状态 |
|------|--------|------|
| 地图导航 | 80% | 🟡 进行中 |
| AI诊断 | 85% | 🟡 进行中 |
| 造价估算 | 70% | 🟢 新增 |
| 施工对接 | 60% | 🟢 新增 |
| 进度跟踪 | 50% | 🟢 新增 |
| 案例分享 | 75% | 🟡 进行中 |
| 云开发初始化 | 100% | ✅ 完成 |

**总体进度：约 70%**

## 🎯 挑战杯准备

### 已完成
- ✅ 核心功能开发
- ✅ 云开发初始化修复
- ✅ 造价估算模块
- ✅ 施工对接模块

### 待完成
- 📋 完善AI诊断报告展示
- 📋 优化用户界面
- 📋 准备演示数据
- 📋 编写答辩材料
- 📋 制作演示视频

## 👥 项目团队

### 无障碍组
- 组长：王易
- 组员：张小燕、何彦欣、王甜、吴宗埔、陈锦琪、陈佳睿、贺立青、李卓岚

### 技术组
- 组长：丁仁凯
- 组员：孙瑞晰、陈胜文

### 设计组
- 组长：蒋怡宁
- 组员：段曾亚鹏、耿智琳

## 📝 开发文档

- [云开发初始化修复说明](./云开发初始化问题修复说明.md)
- [修复完成报告](./云开发初始化修复完成报告.md)
- [代码优化进度报告](./代码优化进度报告.md)
- [项目实施方案](./最终确认方案.md)

## 🔧 常见问题

### 1. 云开发初始化错误
**问题**：`Error: Cloud API isn't enabled, please call wx.cloud.init first`

**解决方案**：已在所有页面添加延迟初始化，确保 `wx.cloud.init()` 先执行。

### 2. 地图不显示
**问题**：地图组件显示空白

**解决方案**：
1. 检查腾讯地图密钥是否正确
2. 确认已开启位置权限
3. 检查网络连接

### 3. AI诊断失败
**问题**：上传图片后AI诊断失败

**解决方案**：
1. 检查云函数是否正确部署
2. 确认图片大小不超过限制
3. 查看云函数日志排查错误

## 📄 许可证

本项目仅用于学术研究和公益服务，未经授权不得用于商业用途。

## 📞 联系我们

- 项目负责人：王易
- 技术负责人：丁仁凯
- 学校：长沙理工大学建筑学院

---

**最后更新时间**：2026-01-29

**版本**：v2.0.0

**状态**：🚀 持续开发中
