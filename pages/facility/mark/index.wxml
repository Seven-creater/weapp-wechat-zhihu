<view class="mark-container">
  <!-- å¤´éƒ¨ -->
  <view class="header">
    <view class="back-btn" bindtap="handleCancel">
      <text>å–æ¶ˆ</text>
    </view>
    <text class="title">æ ‡æ³¨è®¾æ–½</text>
    <view class="header-right"></view>
  </view>

  <scroll-view scroll-y class="content">
    <!-- ä½ç½®ä¿¡æ¯ -->
    <view class="section">
      <view class="section-header">
        <text class="section-title">ğŸ“ ä½ç½®ä¿¡æ¯</text>
        <view class="reselect-btn" bindtap="chooseLocation">
          <text>é‡æ–°é€‰ç‚¹</text>
        </view>
      </view>
      <text class="location-text">{{formattedAddress || 'æš‚æœªé€‰æ‹©ä½ç½®'}}</text>
      <input
        class="detail-address-input"
        placeholder="è¯·è¾“å…¥è¯¦ç»†åœ°å€ï¼ˆå¦‚ï¼š3å·æ¥¼ä¸œä¾§å…¥å£ï¼‰"
        value="{{detailAddress}}"
        bindinput="onDetailAddressInput"
      />
    </view>

    <!-- è®¾æ–½ç±»å‹ -->
    <view class="section">
      <text class="section-title">ğŸ—ï¸ è®¾æ–½ç±»å‹</text>
      <text class="required">*</text>
      <picker
        mode="selector"
        range="{{facilityTypes}}"
        bindchange="onFacilityTypeChange"
      >
        <view class="picker">
          <text class="{{selectedFacilityType ? 'selected' : 'placeholder'}}">
            {{selectedFacilityType || 'è¯·é€‰æ‹©è®¾æ–½ç±»å‹'}}
          </text>
          <text class="arrow">></text>
        </view>
      </picker>
    </view>

    <!-- è®¾æ–½åç§° -->
    <view class="section">
      <text class="section-title">ğŸ“ è®¾æ–½åç§°ï¼ˆé€‰å¡«ï¼‰</text>
      <input
        class="name-input"
        placeholder="å¦‚ï¼šXXå°åŒº1å·æ¥¼æ— éšœç¢å¡é“"
        value="{{facilityName}}"
        bindinput="onNameInput"
      />
    </view>

    <!-- è®¾æ–½çŠ¶æ€ -->
    <view class="section">
      <text class="section-title">ğŸš¦ è®¾æ–½çŠ¶æ€</text>
      <text class="required">*</text>
      <view class="status-grid">
        <view
          class="status-item {{selectedStatus === item.value ? 'active' : ''}}"
          wx:for="{{statusOptions}}"
          wx:key="value"
          data-status="{{item.value}}"
          bindtap="onStatusTap"
          style="border-color: {{selectedStatus === item.value ? item.color : '#e5e7eb'}}"
        >
          <text class="status-icon">{{item.icon}}</text>
          <text class="status-label">{{item.label}}</text>
        </view>
      </view>
    </view>

    <!-- ç°åœºç…§ç‰‡ -->
    <view class="section">
      <view class="section-header">
        <text class="section-title">ğŸ“· ç°åœºç…§ç‰‡</text>
        <text class="section-subtitle">{{images.length}}/9</text>
      </view>
      <view class="image-list">
        <view
          class="image-item"
          wx:for="{{images}}"
          wx:key="index"
        >
          <image
            class="uploaded-image"
            src="{{item}}"
            mode="aspectFill"
            bindtap="previewImage"
            data-src="{{item}}"
          ></image>
          <view class="remove-btn" bindtap="removeImage" data-index="{{index}}">
            <text class="remove-icon">Ã—</text>
          </view>
        </view>
        <view class="add-image-btn" wx:if="{{images.length < 9}}" bindtap="chooseImage">
          <text class="add-icon">+</text>
          <text class="add-text">æ·»åŠ ç…§ç‰‡</text>
        </view>
      </view>
    </view>

    <!-- æè¿°/å¤‡æ³¨ -->
    <view class="section">
      <text class="section-title">ğŸ’¬ æè¿°/å¤‡æ³¨ï¼ˆé€‰å¡«ï¼‰</text>
      <textarea
        class="description-input"
        placeholder="è¯·æè¿°è®¾æ–½çš„å…·ä½“æƒ…å†µ..."
        value="{{description}}"
        maxlength="500"
        bindinput="onDescriptionInput"
      ></textarea>
      <view class="word-count">{{description.length}}/500</view>
    </view>
  </scroll-view>

  <!-- åº•éƒ¨æŒ‰é’® -->
  <view class="footer">
    <button class="submit-btn" bindtap="submitMark" disabled="{{submitting}}">
      {{submitting ? 'æäº¤ä¸­...' : 'æäº¤æ ‡æ³¨'}}
    </button>
  </view>
</view>

