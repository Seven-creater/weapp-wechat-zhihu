<view class="container">
  <!-- é¡¶éƒ¨ä¸ªäººä¿¡æ¯ -->
  <view class="profile-header">
    <view class="user-info">
      <image class="avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
      <view class="info-content">
        <view class="name-row">
          <user-name 
            nickName="{{userInfo.nickName}}" 
            userType="{{userType}}"
          />
        </view>
        <!-- ğŸ†• ä¸ªäººç®€ä»‹ -->
        <text class="bio" wx:if="{{profile.bio}}">{{profile.bio}}</text>
        <text class="bio" wx:else>è¿™ä¸ªäººå¾ˆæ‡’ï¼Œä»€ä¹ˆéƒ½æ²¡å†™~</text>
        
        <!-- ğŸ”§ ç¤¾åŒºå·¥ä½œè€…è®¤è¯ä¿¡æ¯ -->
        <view class="gov-cert-info" wx:if="{{userType === 'communityWorker' && profile.community}}">
          <view class="cert-item">
            <text class="cert-icon">ğŸ˜ï¸</text>
            <text class="cert-text">{{profile.community}}</text>
          </view>
          <view class="cert-item" wx:if="{{profile.position}}">
            <text class="cert-icon">ğŸ‘”</text>
            <text class="cert-text">{{profile.position}}</text>
          </view>
          <view class="cert-item" wx:if="{{profile.workId}}">
            <text class="cert-icon">ğŸ†”</text>
            <text class="cert-text">{{profile.workId}}</text>
          </view>
        </view>
      </view>
    </view>
    
    <view class="stats-row">
      <view class="stat-item">
        <text class="stat-num">{{stats.following}}</text>
        <text class="stat-label">å…³æ³¨</text>
      </view>
      <view class="stat-item">
        <text class="stat-num">{{stats.followers}}</text>
        <text class="stat-label">ç²‰ä¸</text>
      </view>
      <view class="stat-item">
        <text class="stat-num">{{stats.likes}}</text>
        <text class="stat-label">è·èµ</text>
      </view>
    </view>

    <view class="action-row">
      <!-- äº’ç›¸å…³æ³¨ -->
      <view class="btn follow-btn mutual" wx:if="{{isMutual}}" bindtap="toggleFollow">
        <text>äº’ç›¸å…³æ³¨</text>
      </view>
      <!-- å·²å…³æ³¨ -->
      <view class="btn follow-btn followed" wx:elif="{{isFollowing}}" bindtap="toggleFollow">
        <text>å·²å…³æ³¨</text>
      </view>
      <!-- æœªå…³æ³¨ -->
      <view class="btn follow-btn" wx:else bindtap="toggleFollow">
        <text>å…³æ³¨</text>
      </view>
      
      <view class="btn chat-btn" bindtap="navigateToChat">ç§ä¿¡</view>
    </view>
  </view>

  <!-- å†…å®¹æ ‡ç­¾é¡µ -->
  <view class="tabs">
    <view class="tab-item {{currentTab === 0 ? 'active' : ''}}" bindtap="onTabTap" data-index="{{0}}">
      <text>åŠ¨æ€</text>
      <view class="indicator" wx:if="{{currentTab === 0}}"></view>
    </view>
    <view class="tab-item {{currentTab === 1 ? 'active' : ''}}" bindtap="onTabTap" data-index="{{1}}">
      <text>æ”¶è—</text>
      <view class="indicator" wx:if="{{currentTab === 1}}"></view>
    </view>
    <view class="tab-item {{currentTab === 2 ? 'active' : ''}}" bindtap="onTabTap" data-index="{{2}}">
      <text>èµè¿‡</text>
      <view class="indicator" wx:if="{{currentTab === 2}}"></view>
    </view>
  </view>

  <!-- å†…å®¹åˆ—è¡¨ -->
  <view class="content-list">
    <view class="post-grid">
      <block wx:for="{{posts}}" wx:key="id">
        <view class="post-item" bindtap="navigateToDetail" data-id="{{item.id}}" data-route="{{item.route}}">
          <image class="post-cover" src="{{item.image}}" mode="aspectFill"></image>
          <view class="post-title">{{item.title}}</view>
          <view class="post-footer">
            <view class="like-info">
              <text class="icon">â¤ï¸</text>
              <text>{{item.likes}}</text>
            </view>
          </view>
        </view>
      </block>
    </view>
    
    <view wx:if="{{posts.length === 0}}" class="empty-state">
      <text>æš‚æ— å†…å®¹</text>
    </view>
  </view>
</view>
