<!-- pages/cases/index/index.wxml -->
<view class="container">
  <view class="header">
    <view class="header-title">ä¼˜è´¨æ¡ˆä¾‹</view>
    <view class="header-subtitle">ç²¾é€‰ç¤¾åŒºä¼˜ç§€æ–½å·¥æ¡ˆä¾‹</view>
  </view>

  <view class="categories">
    <scroll-view class="categories-scroll" scroll-x>
      <view class="categories-list">
        <block wx:for="{{categories}}" wx:key="id">
          <view 
            class="category-item {{currentCategory === item.id ? 'active' : ''}}"
            bindtap="switchCategory"
            data-category="{{item.id}}"
          >
            {{item.name}}
          </view>
        </block>
      </view>
    </scroll-view>
  </view>

  <view class="cases-list">
    <block wx:for="{{cases}}" wx:key="_id">
      <view class="case-card" bindtap="viewCase" data-id="{{item._id}}">
        <view class="case-images">
          <image 
            class="case-cover" 
            src="{{item.coverImage}}" 
            mode="aspectFill"
          />
          <view wx:if="{{item.isFeatured}}" class="featured-badge">
            <text class="badge-icon">â­</text>
            <text class="badge-text">ç²¾é€‰</text>
          </view>
        </view>

        <view class="case-content">
          <view class="case-title">{{item.title}}</view>
          
          <view class="case-info">
            <view class="info-item">
              <text class="info-label">ç±»å‹ï¼š</text>
              <text class="info-value">{{item.category}}</text>
            </view>
            <view class="info-item">
              <text class="info-label">å·¥æœŸï¼š</text>
              <text class="info-value">{{item.duration}}å¤©</text>
            </view>
            <view class="info-item">
              <text class="info-label">è´¹ç”¨ï¼š</text>
              <text class="info-value">Â¥{{item.actualCost}}</text>
            </view>
          </view>

          <view class="case-footer">
            <view class="contractor-info">
              <image class="contractor-avatar" src="{{item.contractorAvatar}}" />
              <text class="contractor-name">{{item.contractorName}}</text>
            </view>
            <view class="case-date">{{item.completedDate}}</view>
          </view>
        </view>
      </view>
    </block>
  </view>

  <view wx:if="{{loading}}" class="loading">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <view wx:if="{{!loading && cases.length === 0}}" class="empty">
    <text class="empty-icon">ğŸ“¦</text>
    <text class="empty-text">æš‚æ— æ¡ˆä¾‹</text>
  </view>

  <view wx:if="{{!loading && !hasMore && cases.length > 0}}" class="no-more">
    <text>æ²¡æœ‰æ›´å¤šäº†</text>
  </view>
</view>

