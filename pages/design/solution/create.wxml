<!-- pages/design/solution/create.wxml -->
<view class="container">
  <view class="header">
    <view class="header-title">添加设计方案</view>
    <view class="header-subtitle">为问题提供专业的设计建议</view>
  </view>

  <view class="form-section">
    <view class="form-label">
      <text class="label-text">设计方案描述</text>
      <text class="label-required">*</text>
    </view>
    <textarea 
      class="form-textarea"
      placeholder="详细描述您的设计方案、施工建议、材料选择等..."
      value="{{description}}"
      bindinput="onDescInput"
      maxlength="1000"
      show-confirm-bar="{{false}}"
    />
    <view class="char-count">{{description.length}}/1000</view>
  </view>

  <view class="form-section">
    <view class="form-label">
      <text class="label-text">设计图纸</text>
      <text class="label-required">*</text>
      <text class="label-tip">（最多{{maxImages}}张）</text>
    </view>
    
    <view class="image-grid">
      <block wx:for="{{images}}" wx:key="index">
        <view class="image-item">
          <image 
            class="image-preview" 
            src="{{item}}" 
            mode="aspectFill"
            bindtap="previewImage"
            data-src="{{item}}"
          />
          <view class="image-remove" bindtap="removeImage" data-index="{{index}}">
            <text class="remove-icon">×</text>
          </view>
        </view>
      </block>
      
      <view 
        wx:if="{{images.length < maxImages}}" 
        class="image-add" 
        bindtap="chooseImage"
      >
        <text class="add-icon">+</text>
        <text class="add-text">添加图片</text>
      </view>
    </view>
  </view>

  <view class="form-section">
    <view class="form-label">
      <text class="label-text">预算调整（元）</text>
    </view>
    <input 
      class="form-input"
      type="digit"
      placeholder="如需调整预算，请输入新的预算金额"
      value="{{budgetAdjustment}}"
      bindinput="onBudgetInput"
    />
    <view class="form-tip">💡 如果AI估算的预算不准确，可以在此调整</view>
  </view>

  <view class="tips-section">
    <view class="tips-title">📝 设计建议</view>
    <view class="tips-item">• 提供详细的设计方案和施工步骤</view>
    <view class="tips-item">• 上传清晰的设计图纸或效果图</view>
    <view class="tips-item">• 说明材料选择和施工注意事项</view>
    <view class="tips-item">• 给出合理的预算建议</view>
  </view>

  <view class="submit-section">
    <button 
      class="submit-btn" 
      bindtap="submitSolution"
      disabled="{{submitting}}"
    >
      {{submitting ? '提交中...' : '提交设计方案'}}
    </button>
  </view>
</view>



