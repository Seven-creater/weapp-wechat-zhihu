<view class="tab-bar">
  <block wx:for="{{list}}" wx:key="index">
    <view 
      class="tab-bar-item {{selected === index ? 'active' : ''}} {{item.isSpecial ? 'special' : ''}}"
      data-path="{{item.pagePath}}"
      data-index="{{index}}"
      bindtap="switchTab"
    >
      <!-- ç‰¹æ®ŠæŒ‰é’®ï¼ˆå‘å¸ƒï¼‰ -->
      <view wx:if="{{item.isSpecial}}" class="special-button">
        <image class="special-icon" src="{{item.iconPath}}" mode="aspectFit"></image>
      </view>
      
      <!-- æ™®é€šæŒ‰é’® -->
      <block wx:else>
        <view class="tab-icon-wrapper">
          <image 
            class="tab-icon" 
            src="{{selected === index ? item.selectedIconPath : item.iconPath}}"
            mode="aspectFit"
          ></image>
          <!-- ðŸ†• æœªè¯»æ¶ˆæ¯è§’æ ‡ -->
          <view 
            class="badge" 
            wx:if="{{item.text === 'æ¶ˆæ¯' && unreadCount > 0}}"
          >
            <text class="badge-text">{{unreadCount > 99 ? '99+' : unreadCount}}</text>
          </view>
        </view>
        <text class="tab-text" style="color: {{selected === index ? selectedColor : color}}">
          {{item.text}}
        </text>
      </block>
    </view>
  </block>
</view>

