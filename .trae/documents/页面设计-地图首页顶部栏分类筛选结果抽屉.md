# 页面设计说明：地图首页（顶部栏/分类入口/筛选标签/结果卡与详情抽屉）

> 默认桌面端优先：在桌面端采用“地图为主、右侧抽屉为辅”的布局；在移动端降级为底部半屏抽屉（与截图一致）。

## 全局样式（Design Tokens）
- 背景色：`#F7F8FA`（页面背景）、`#FFFFFF`（卡片/抽屉）
- 主色：`#2B6EF2`（主按钮/选中态）
- 辅助色：`#111827`（主文字）、`#6B7280`（次文字）、`#E5E7EB`（分割线/边框）
- 圆角：卡片/抽屉 `16px`，标签 `999px`（胶囊）
- 阴影：抽屉与浮层 `0 8px 24px rgba(0,0,0,0.12)`
- 字体层级：
  - H1/标题：18-20px，600
  - 卡片标题：16px，600
  - 正文：14px，400
  - 辅助信息：12px，400
- 交互态：
  - 主按钮 hover/press：背景加深 8%
  - 标签选中：主色底 + 白字；未选中：浅灰底 + 深灰字
  - 可点击区域最小高度：44px

## 页面 1：地图首页

### 1) Meta Information
- Title：无障碍地图
- Description：在地图上筛选并查看无障碍设施，支持一键导航。
- Open Graph：
  - og:title=无障碍地图
  - og:description=查找附近无障碍设施并导航

### 2) Layout
- 桌面端（Desktop-first）：CSS Grid 双栏
  - 左侧：地图区域（占比约 70%）
  - 右侧：抽屉面板（占比约 30%，可折叠）
- 移动端：地图全屏 + 底部 Bottom Sheet（三态：收起/列表/详情）
- 间距与对齐：
  - 统一 8px 栅格（8/16/24）
  - 顶部栏与浮层均使用安全区内边距

### 3) Page Structure
1. 顶部栏（浮层）
2. 地图画布（主体）
3. 分类入口（浮层，靠近底部，抽屉上方）
4. 筛选标签（浮层，位于分类入口下方/或抽屉顶部）
5. 右侧地图控件（浮层）
6. 浮动快捷按钮（浮层：拍照/新增）
7. 底部结果抽屉（列表态/详情态）

### 4) Sections & Components

#### A. 顶部栏（Top Bar）
- 左侧：当前位置选择
  - 样式：胶囊按钮（定位图标 + 城市/区域名 + 下拉箭头）
  - 交互：点击打开“城市/区域选择”（可后续实现，此处只定义入口）
- 中间：搜索框
  - 占位文案：请输入您想去
  - 交互：点击进入“搜索与目的地选择页”，回填后自动触发以目的地为中心的刷新
- 右侧：
  - 收藏入口（心形图标）
  - 消息入口（对话气泡图标）
  - 交互：点击跳转对应页面（不在本需求内细化）

#### B. 地图区域（Map Canvas）
- Marker 规则：
  - 颜色/形状按分类区分；选中态放大 1.1 倍并置顶
  - 聚类（可选）：密集点位时显示聚合数字
- 点击交互：
  - 点击 Marker：
    1) 地图中心轻微偏移以避免被抽屉遮挡
    2) 抽屉切到“详情态”并展示该点信息
  - 点击地图空白：
    - 若在详情态：回到列表态或收起（产品可二选一，默认回到列表态）

#### C. 分类入口（Category Launcher）
- 结构：一行图标按钮（可横向滚动），每项包含：图标 + 文案
- 默认项（以截图为参考，可配置）：无障碍厕所/无障碍停车位/坡道/电梯/公交等
- 选中态：主色描边或底色强调
- 交互：点击即切换当前分类，刷新 Marker 与结果列表，并将抽屉回到列表态顶部

#### D. 筛选标签（Filter Chips）
- 结构：横向滚动 Chip 列表
- 基础项：全部
- 其余项：随分类变化（例如：距离最近/评分最高/可用/已验证等，以产品配置为准）
- 交互：单选；切换后刷新列表与 Marker；保持当前地图中心不变

#### E. 底部结果抽屉（Bottom Sheet）
- 三态定义（移动端）：
  1) 收起态：仅显示把手 + 当前分类/数量摘要（可选）
  2) 列表态：半屏，展示结果卡列表
  3) 详情态：半屏，展示选中点位详情
- 把手：居中短条，支持拖拽
- 列表态内容：
  - 顶部：当前分类标题 +（可选）结果数量
  - 列表项（结果卡）字段：
    - 分类标签（胶囊）
    - 名称
    - 距离（右侧）
    - 评分（若有，用星级）
    - 按钮：查看详情（次按钮）/ 去这里（主按钮）
- 详情态内容：
  - 标题：名称
  - 副标题：地址/区域 + 距离
  - 主按钮：去这里
  - 模块：附近的无障碍设施（横向卡片）

#### F. 右侧地图控件（Map Controls）
- 按钮：图层（可选）、定位/居中、缩放
- 交互：
  - 定位：请求定位权限；成功后地图居中并刷新
  - 失败：提示“无法获取定位，请检查权限”

#### G. 浮动快捷按钮（FAB）
- 两个按钮（以截图为参考）：
  - 拍照/上传
  - 新增/上报入口
- 交互：点击进入对应流程（本文仅定义入口与视觉，不定义后续页面）

### 5) 状态与空态
- 首次进入（无定位权限）：地图默认城市中心 + 提示条引导开启定位
- 无结果：抽屉显示“当前条件下暂无结果”，提供“清除筛选/回到全部”按钮
- 加载中：抽屉列表骨架屏；Marker 渐进渲染

## 页面 2：搜索与目的地选择页

### 1) Meta Information
- Title：搜索地点
- Description：搜索并选择目的地。

### 2) Layout
- 桌面端：顶部搜索栏 + 左侧结果列表 + 右侧小地图预览（可选）
- 移动端：顶部搜索栏 + 全屏列表

### 3) Sections & Components
- 顶部搜索栏：返回按钮 + 输入框 + 清除按钮
- 结果列表：
  - 列表项：名称（主）+ 地址（次）
  - 点击：回到地图首页，设置地图中心为所选地点，并刷新分类/筛选结果
- 历史记录（可选）：展示最近选择的地点，支持清除

### 4) Interaction
- 输入时：防抖 300ms 触发检索
- 空关键词：展示历史/推荐（若无则只展示空态）
- 选择结果：触发回填并关闭页面
